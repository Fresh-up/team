fl{

  float:left;

};

.fr{

  float:right;

};

.clearfix::after{

  content: "";

  display: block;

  clear: both;
 
};

data: {

    dateRange: {

      start: "",

      end: ""

    };

    msgData: [], 

    isFristShow: true,   

    currentDate: "",    

    isToday: true,      

    cost: {          

      shouru: 0,

      zhichu:0

    };

    monthDate: "",    

    monthCost: {     

      shouru: 0,

      zhichu: 0

    },
    this.setData({

      dateRange: {

        start,

        end

      };
//写一个更改日期时间函数selectDate

this.getMsgData(e.detail.value); 

if (e.detail.value.substring(0, 7) != this.data.monthDate){

      this.data.monthDate = e.detail.value.substring(0, 7)

      this.getMonMsgData(this.data.monthDate)

    }
//getMsgData函数是获取某天记账记录信息
let that = this; 
that.data.cost.zhichu = 0;
//调用get_msg_data 云函数
wx.cloud.callFunction({
name: "get_msg_data",
  data: {
     date: time;
      };
success: function(res){
    wx.hideLoading();
        console.log("调用get_msg_data 云函数成功-->",res)
        let data = res.result.data;
        data.forEach(v =>{

         if(v.costType == "zhichu"){

         that.data.cost.zhichu += Number(v.money)

          }else{

         that.data.cost.shouru += Number(v.money)

        };
        that.data.cost.zhichu = that.data.cost.zhichu.toLocaleString();

     that.data.cost.shouru = that.data.cost.shouru.toLocaleString();
//接着判断选择的日期是否是当天       
if(time == that.data.dateRange.end){

          that.data.isToday = true;

        }else{

          that.data.isToday = false;
      }
 // 修改currentDate
 let timeArr = time.split("-");

//获取今年月份
let year = new Date().getFullYear();

        if(year == timeArr[0]){

          that.data.currentDate = timeArr[1] + "月" + timeArr[2] + "日";

        }
        else{

     that.data.currentDate = timeArr[0] + "年" +timeArr[1] + "月" + timeArr[2] + "日";

        }
        //然后调用get_msg_data云函数，获取对应月的记账记录信息 再遍历。       
        data.forEach(v =>{

          that.data.monthCost[v.costType] += Number(v.money);

        }

//本月结余
let surplus = (that.data.monthCost.shouru - that.data.monthCost.zhichu).toFixed(2).split(".");

        console.log("surplus-->", surplus)

//将支出收入保留小数位      
that.data.monthCost.zhichu = that.data.monthCost.zhichu.toFixed(2);
that.data.monthCost.shouru = that.data.monthCost.shouru.toFixed(2);
//最后页面响应
setdata;

 
